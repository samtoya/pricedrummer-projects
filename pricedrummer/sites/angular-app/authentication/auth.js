angular.module('PxdmSite.auth',['ngRoute','ui.router']).config(function($stateProvider,$urlRouterProvider){$stateProvider.state('/login',{url:'/login',templateUrl:'authentication/login.php',controller:'AuthCtrl',data:{pageTitle:'Login - PriceDrummer.com.gh'}}).state('/register',{url:'/register',templateUrl:'authentication/register.php',controller:'AuthCtrl',data:{pageTitle:'Register - PriceDrummer.com.gh'}})}).controller('AuthCtrl',['myService','$scope','$http','$rootScope','$log','$location',function(myService,$scope,$http,$rootScope,$log,$location){myService.async().then(function(Token_data){$http.defaults.headers.common.Authorization='Bearer '+Token_data;$rootScope.PageLoaded=true;$scope.registration=function(){var userDetails={first_name:$scope.firstname,last_name:$scope.lastname,username:$scope.username,email:$scope.email,password:$scope.password,confirm_password:$scope.confirm_password}
    $http({method:'POST',url:'https://api.pricedrummer.com.gh/accounts/',data:userDetails}).then(function(response){if(response.status==201){$location.path('/login');}},function(error){$log.log(error);})
    $scope.userInfo=userDetails;$scope.username='';$scope.password='';$scope.firstname='';$scope.lastname='';$scope.confirm_password='';$scope.email='';}
    $scope.login=function(){var userDetails={username:$scope.username,password:$scope.password,}
        $http({method:'POST',url:'https://api.pricedrummer.com.gh/auth/login/',data:userDetails}).then(function(response){$log.log(response);},function(error){$log.log(error);})
        $scope.userInfo=userDetails;$scope.username='';$scope.password='';}});}]);